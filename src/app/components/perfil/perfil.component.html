<app-sidebar></app-sidebar>
<app-header></app-header>

<div class="ml-[20%] w-[80%] mt-24 pl-[120px] p-6" *ngIf="user$ | async as user;">
    <h1 class="text-accent-dark text-4xl font-semibold">Informações Pessoais</h1>
    <div class="flex mt-9 mb-14 relative">
        <div class="relative size-28 rounded-full overflow-hidden mt-4">
            <!-- Imagem de fundo (Foto padrão) -->
            <img src="../../../assets/imgs/Foto_User.png" 
                 alt="Foto padrão"
                 class="absolute inset-0 w-full h-full object-cover">
          
            <!-- Foto do usuário (se existir) -->
            <img *ngIf="user.photo && user.photo.trim() !== ''" 
                 [src]="user.photo" 
                 alt=""
                 class="absolute inset-0 w-full h-full object-cover">
          </div>
          
        <input type="file" (change)="onFileSelected($event)" class="hidden" id="fileInput">
        <label for="fileInput" class=" mb-4 mr-4 cursor-pointer">
            <img src="../../../assets/icons/pencil.svg" alt="Editar foto" class="w-6 h-6">
        </label>
    </div>
    <div class="flex">
        <p class="text-accent-dark text-2xl mb-5 font-semibold">Tipo de usuário:</p>
        <p class="ml-[1%] pt-[0.3%] text-xl text-accent-gray font-normal">{{user.role}}</p>
    </div>
    <form class="flex flex-col" (ngSubmit)="updateUser()">
        <div class="mb-3">
            <label for="email" class="block text-sm font-[400] text-accent-gray mb-1">E-mail</label>
            <input type="email" id="email" name="email" [(ngModel)]="user.email"
                class="w-[550px] p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary transition"
                placeholder="E-mail" required>
        </div>
        <div class="mb-3">
            <label for="password" class="block text-sm font-[400] text-accent-gray mb-1">Senha</label>
            <input type="password" id="password" name="password" [(ngModel)]="password"
                class="w-[550px] p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary transition"
                placeholder="Senha">
        </div>
        <div class="mb-3">
            <label for="codigo" class="block text-sm font-[400] text-accent-gray mb-1">Código</label>
            <input type="text" id="codigo" name="codigo" readonly
                class="w-[550px] p-2 text-sm border border-gray-300 rounded-lg focus:outline-none"
                [value]="user.code" required>
        </div>

        <button type="submit"
            class="w-[550px] bg-secondary-dark text-white py-2 rounded-lg hover:bg-secondary transition font-semibold shadow-md">
            Salvar informações
        </button>
    </form>
</div>

